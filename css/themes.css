/* ================================
   主題樣式定義 - themes.css
   ================================ */

/* 深色模式樣式 */
body.dark-mode {
  background-color: var(--dark-bg);
  color: var(--dark-text);
}

body.dark-mode header {
  background: linear-gradient(135deg, #444444, #666666);
  border-bottom-color: var(--dark-border);
}

body.dark-mode .note-form {
  background: var(--dark-card);
  border-color: var(--dark-border);
}

body.dark-mode .note-card {
  background: var(--dark-card);
  border-color: var(--dark-border);
}

body.dark-mode .note-title {
  color: var(--primary);
}

body.dark-mode .note-content {
  color: var(--dark-text);
}

body.dark-mode .note-meta {
  color: #999;
  border-top-color: var(--dark-border);
}

body.dark-mode .category-badge {
  background: var(--dark-border);
  color: var(--dark-text);
}

body.dark-mode .input, 
body.dark-mode select, 
body.dark-mode textarea {
  background: var(--dark-card);
  border-color: var(--dark-border);
  color: var(--dark-text);
}

body.dark-mode .stat-card {
  background: var(--dark-card);
  color: var(--dark-text);
}

body.dark-mode .stat-number {
  color: var(--primary);
}

body.dark-mode .stat-label {
  color: #999;
}

body.dark-mode footer {
  border-top-color: var(--dark-border);
  color: #999;
}

body.dark-mode .empty-state {
  color: #999;
}

body.dark-mode .empty-state h3 {
  color: var(--primary);
}

/* ================================
   日本雜誌風格溫柔主題
   ================================ */

/* 奶茶拿鐵主題 - Milk Tea Latte */
body.theme-milktea {
  --primary: #D4A574;        /* 溫暖奶茶色 */
  --secondary: #E8D5C4;      /* 淺駝色 */
  --background: #FAF7F2;     /* 溫暖米白 */
  --text: #5D4E37;           /* 溫和咖啡色 */
  --highlight: #C8956D;      /* 焦糖色 */
  --note: #F0E6D6;           /* 奶油色 */
  --success: #A4B494;        /* 溫和綠 */
  --danger: #D4A574;         /* 溫和橘 */
  --info: #B8A082;           /* 溫和灰棕 */
}

body.theme-milktea.dark-mode {
  --dark-bg: #2C2118;
  --dark-text: #F5F0E8;
  --dark-card: #3A2F22;
  --dark-border: #5D4E37;
}

/* 薰衣草奶昔主題 - Lavender Cream */
body.theme-lavender {
  --primary: #C8A8D8;        /* 溫柔薰衣草 */
  --secondary: #E6D7ED;      /* 淡紫灰 */
  --background: #F9F6FB;     /* 淡紫白 */
  --text: #6B5B73;           /* 溫和紫灰 */
  --highlight: #B695C0;      /* 柔和紫 */
  --note: #F0E8F3;           /* 淡紫霧 */
  --success: #A8C8A8;        /* 薄荷綠 */
  --danger: #D8A8B8;         /* 玫瑰粉 */
  --info: #A8B8D8;           /* 淡藍紫 */
}

body.theme-lavender.dark-mode {
  --dark-bg: #1F1A21;
  --dark-text: #F0E8F3;
  --dark-card: #2D252F;
  --dark-border: #6B5B73;
}

/* 抹茶奶霜主題 - Matcha Cream */
body.theme-matcha {
  --primary: #A8C8A8;        /* 溫柔抹茶 */
  --secondary: #D0E0D0;      /* 淡綠灰 */
  --background: #F6FAF6;     /* 淡綠白 */
  --text: #5A6B5A;           /* 溫和森林綠 */
  --highlight: #94B894;      /* 柔和綠 */
  --note: #E8F2E8;           /* 淡抹茶霧 */
  --success: #A8C8A8;        /* 抹茶綠 */
  --danger: #C8A8A8;         /* 溫和粉紅 */
  --info: #A8B8C8;           /* 淡青綠 */
}

body.theme-matcha.dark-mode {
  --dark-bg: #1A1F1A;
  --dark-text: #E8F2E8;
  --dark-card: #252A25;
  --dark-border: #5A6B5A;
}

/* 蜜桃奶昔主題 - Peach Cream */
body.theme-peach {
  --primary: #F5C2B8;        /* 溫柔蜜桃 */
  --secondary: #F8D7D0;      /* 淡桃粉 */
  --background: #FFFAF9;     /* 桃花白 */
  --text: #6B5A5A;           /* 溫和棕紅 */
  --highlight: #F0A898;      /* 柔和桃 */
  --note: #FDF0ED;           /* 淡桃霧 */
  --success: #B8C8A8;        /* 溫和綠 */
  --danger: #F5C2B8;         /* 蜜桃色 */
  --info: #B8C8D8;           /* 淡藍粉 */
}

body.theme-peach.dark-mode {
  --dark-bg: #211A1A;
  --dark-text: #FDF0ED;
  --dark-card: #2F2525;
  --dark-border: #6B5A5A;
}

/* 雲朵米色主題 - Cloud Beige */
body.theme-cloud {
  --primary: #D8C8B8;        /* 溫暖雲朵色 */
  --secondary: #E8DDD0;      /* 淡米色 */
  --background: #FAF8F5;     /* 雲白色 */
  --text: #6B6055;           /* 溫和大地色 */
  --highlight: #C8B8A8;      /* 柔和米棕 */
  --note: #F0EBE5;           /* 淡雲霧 */
  --success: #B8C8B8;        /* 溫和綠灰 */
  --danger: #D8B8B8;         /* 溫和粉棕 */
  --info: #B8C8D8;           /* 淡藍灰 */
}

body.theme-cloud.dark-mode {
  --dark-bg: #1F1D1A;
  --dark-text: #F0EBE5;
  --dark-card: #2D2A25;
  --dark-border: #6B6055;
}

/* ================================
   溫柔主題專用視覺效果
   ================================ */

/* 為溫柔主題添加柔和陰影 */
body.theme-milktea .note-card,
body.theme-lavender .note-card,
body.theme-matcha .note-card,
body.theme-peach .note-card,
body.theme-cloud .note-card {
  box-shadow: 0 2px 20px rgba(0,0,0,0.06);
  border: 1px solid rgba(255,255,255,0.8);
}

body.theme-milktea .note-card:hover,
body.theme-lavender .note-card:hover,
body.theme-matcha .note-card:hover,
body.theme-peach .note-card:hover,
body.theme-cloud .note-card:hover {
  box-shadow: 0 8px 30px rgba(0,0,0,0.08);
  transform: translateY(-2px);
}

/* 溫柔主題的表單樣式 */
body.theme-milktea .note-form,
body.theme-lavender .note-form,
body.theme-matcha .note-form,
body.theme-peach .note-form,
body.theme-cloud .note-form {
  background: rgba(255,255,255,0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.3);
}

/* 溫柔主題的按鈕效果 */
body.theme-milktea .btn,
body.theme-lavender .btn,
body.theme-matcha .btn,
body.theme-peach .btn,
body.theme-cloud .btn {
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  border: 1px solid rgba(255,255,255,0.2);
}

/* 溫柔主題的統計卡片 */
body.theme-milktea .stat-card,
body.theme-lavender .stat-card,
body.theme-matcha .stat-card,
body.theme-peach .stat-card,
body.theme-cloud .stat-card {
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.4);
}

/* 溫柔主題的標題裝飾 */
body.theme-milktea header,
body.theme-lavender header,
body.theme-matcha header,
body.theme-peach header,
body.theme-cloud header {
  position: relative;
  overflow: hidden;
}

body.theme-milktea header::before,
body.theme-lavender header::before,
body.theme-matcha header::before,
body.theme-peach header::before,
body.theme-cloud header::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
  animation: gentle-float 20s ease-in-out infinite;
  pointer-events: none;
}

@keyframes gentle-float {
  0%, 100% { transform: translate(0, 0) rotate(0deg); }
  33% { transform: translate(10px, -10px) rotate(1deg); }
  66% { transform: translate(-5px, 5px) rotate(-1deg); }
}

/* 溫柔主題的輸入框樣式 */
body.theme-milktea .input,
body.theme-milktea select,
body.theme-milktea textarea,
body.theme-lavender .input,
body.theme-lavender select,
body.theme-lavender textarea,
body.theme-matcha .input,
body.theme-matcha select,
body.theme-matcha textarea,
body.theme-peach .input,
body.theme-peach select,
body.theme-peach textarea,
body.theme-cloud .input,
body.theme-cloud select,
body.theme-cloud textarea {
  background: rgba(255,255,255,0.8);
  border: 1px solid rgba(0,0,0,0.1);
  backdrop-filter: blur(5px);
}

body.theme-milktea .input:focus,
body.theme-milktea select:focus,
body.theme-milktea textarea:focus,
body.theme-lavender .input:focus,
body.theme-lavender select:focus,
body.theme-lavender textarea:focus,
body.theme-matcha .input:focus,
body.theme-matcha select:focus,
body.theme-matcha textarea:focus,
body.theme-peach .input:focus,
body.theme-peach select:focus,
body.theme-peach textarea:focus,
body.theme-cloud .input:focus,
body.theme-cloud select:focus,
body.theme-cloud textarea:focus {
  background: rgba(255,255,255,0.95);
  box-shadow: 0 0 0 3px rgba(var(--primary), 0.1);
}

/* ================================
   主題切換動畫
   ================================ */

/* 平滑過渡效果 */
body, 
.note-card, 
.note-form, 
.stat-card,
.input,
select,
textarea {
  transition: 
    background-color 0.3s ease,
    color 0.3s ease,
    border-color 0.3s ease,
    box-shadow 0.3s ease;
}

/* ================================
   UI 控制項樣式
   ================================ */

.ui-controls {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-top: 1rem;
}

.theme-controls,
.font-controls {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
  justify-content: center;
}

.control-label {
  color: white;
  font-weight: 500;
  min-width: fit-content;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.font-selector {
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 20px;
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
  color: var(--text);
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 120px;
  backdrop-filter: blur(10px);
}

.font-selector:hover {
  background: rgba(255, 255, 255, 1);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.font-selector:focus {
  outline: none;
  border-color: rgba(255, 255, 255, 0.8);
  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
}

.font-selector option {
  padding: 0.5rem;
  background: white;
  color: var(--text);
}

/* 主題選擇器樣式更新 */
.theme-selector {
  display: flex;
  gap: 0.5rem;
  margin: 1rem 0;
  flex-wrap: wrap;
  justify-content: center;
}

/* ================================
   字體主題特殊效果
   ================================ */

/* 圓體字型特殊效果 */
body.font-kosugi,
body.font-mplus,
body.font-comfortaa,
body.font-fredoka,
body.font-varela {
  letter-spacing: 0.3px;
}

body.font-kosugi .note-title,
body.font-mplus .note-title,
body.font-comfortaa .note-title,
body.font-fredoka .note-title,
body.font-varela .note-title {
  letter-spacing: 0.5px;
}

/* 襯線字體特殊效果 */
body.font-noto-serif {
  line-height: 1.7;
}

body.font-noto-serif .note-content {
  line-height: 1.8;
  letter-spacing: 0.2px;
}

body.font-noto-serif .note-title {
  font-weight: 500;
  letter-spacing: 0.3px;
}

/* 英文字體特殊調整 */
body.font-quicksand,
body.font-nunito,
body.font-poppins {
  letter-spacing: 0.2px;
}

body.font-quicksand .note-title,
body.font-nunito .note-title,
body.font-poppins .note-title {
  font-weight: 600;
  letter-spacing: 0.4px;
}

/* Fredoka 字體特殊效果 */
body.font-fredoka {
  line-height: 1.65;
}

body.font-fredoka .note-title {
  font-weight: 500;
  letter-spacing: 0.8px;
}

body.font-fredoka header h1 {
  letter-spacing: 1px;
}

/* 字體切換動畫 */
.note-title,
.note-content,
header h1,
header p {
  transition: font-family 0.3s ease, letter-spacing 0.3s ease, line-height 0.3s ease;
}

/* 字體預覽效果 */
.font-selector option {
  padding: 0.8rem 1rem;
  line-height: 1.5;
}

.font-selector:focus option:hover {
  background: var(--primary);
  color: white;
}

/* 字體預覽樣式 */
.font-preview {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.95);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 15px;
  padding: 1rem 1.5rem;
  margin-top: 0.5rem;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  z-index: 1000;
  white-space: nowrap;
}

.font-controls {
  position: relative;
}

.preview-text {
  font-size: 1.1rem;
  color: var(--text);
  font-weight: 500;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

/* 字體預覽動畫 */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
  to {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px);
  }
}

/* 響應式設計 */
@media (max-width: 768px) {
  .ui-controls {
    gap: 0.75rem;
  }
  
  .theme-controls,
  .font-controls {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .control-label {
    margin-bottom: 0.25rem;
  }
  
  .font-selector {
    width: 100%;
    max-width: 200px;
  }
}

.theme-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 3px solid transparent;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.theme-btn:hover {
  transform: scale(1.1);
  border-color: white;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.theme-btn.active {
  border-color: white;
  box-shadow: 0 0 0 2px rgba(255,255,255,0.5);
}

/* 預設主題按鈕 */
.theme-btn.default {
  background: linear-gradient(135deg, #F8C8DC, #FFB3AB);
}

/* 奶茶拿鐵主題按鈕 */
.theme-btn.milktea {
  background: linear-gradient(135deg, #D4A574, #C8956D);
}

/* 薰衣草奶昔主題按鈕 */
.theme-btn.lavender {
  background: linear-gradient(135deg, #C8A8D8, #B695C0);
}

/* 抹茶奶霜主題按鈕 */
.theme-btn.matcha {
  background: linear-gradient(135deg, #A8C8A8, #94B894);
}

/* 蜜桃奶昔主題按鈕 */
.theme-btn.peach {
  background: linear-gradient(135deg, #F5C2B8, #F0A898);
}

/* 雲朵米色主題按鈕 */
.theme-btn.cloud {
  background: linear-gradient(135deg, #D8C8B8, #C8B8A8);
}

/* ================================
   通知樣式（深色模式適配）
   ================================ */

body.dark-mode .notification {
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
}

/* ================================
   動畫定義
   ================================ */

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOutRight {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

/* 載入動畫 */
.loading {
  animation: pulse 1.5s ease-in-out infinite;
}

/* 新增筆記動畫 */
.note-card.new {
  animation: fadeIn 0.5s ease-out;
}

/* ================================
   印刷樣式（列印時使用）
   ================================ */

@media print {
  body {
    background: white !important;
    color: black !important;
  }
  
  .note-form,
  .stats,
  .search-section,
  .btn,
  header button,
  footer {
    display: none !important;
  }
  
  .note-card {
    background: white !important;
    border: 1px solid #ccc !important;
    box-shadow: none !important;
    break-inside: avoid;
    margin-bottom: 1rem;
  }
  
  .note-title {
    color: black !important;
    font-size: 1.2rem !important;
  }
  
  .note-content {
    color: black !important;
  }
}

/* ================================
   高對比度模式支援
   ================================ */

@media (prefers-contrast: high) {
  :root {
    --primary: #000080;
    --secondary: #000000;
    --background: #FFFFFF;
    --text: #000000;
    --highlight: #0000FF;
    --note: #F0F0F0;
  }
  
  body.dark-mode {
    --dark-bg: #000000;
    --dark-text: #FFFFFF;
    --dark-card: #1A1A1A;
    --dark-border: #666666;
  }
  
  .btn {
    border: 2px solid currentColor;
  }
}

/* ================================
   減少動畫模式支援
   ================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}