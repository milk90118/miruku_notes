<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Miruku 醫學筆記</title>
  <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #F8C8DC;       /* 櫻花粉 */
      --secondary: #D8D8D8;     /* 和紙灰 */
      --background: #FFFDF9;    /* 鵝卵白 */
      --text: #444444;          /* 淺墨灰 */
      --highlight: #FFB3AB;     /* 蜜桃橘 */
      --note: #D5E8D4;          /* 抹茶奶綠 */
      --success: #A3D9B1;       /* 若草綠 */
      --danger: #F28B82;        /* 淡紅 */
      --dark-bg: #1E1E1E;
      --dark-text: #E0E0E0;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Zen Maru Gothic', 'Noto Sans TC', sans-serif;
      background-color: var(--background);
      color: var(--text);
      line-height: 1.6;
      padding: 2rem;
      transition: background 0.3s, color 0.3s;
    }

    body.dark-mode {
      background-color: var(--dark-bg);
      color: var(--dark-text);
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
    }

    header h1 {
      color: var(--primary);
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    header p {
      color: var(--secondary);
    }

    .note-card {
      background: white;
      border: 2px dashed var(--note);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 2px 4px 10px rgba(0,0,0,0.05);
      transition: transform 0.2s ease-in-out;
    }

    .note-card:hover {
      transform: scale(1.02);
    }

    .note-title {
      font-size: 1.4rem;
      color: var(--highlight);
      margin-bottom: 0.5rem;
    }

    .note-content {
      font-size: 1rem;
      color: var(--text);
    }

    .note-date {
      font-size: 0.8rem;
      color: var(--secondary);
      margin-top: 0.5rem;
    }

    .btn {
      display: inline-block;
      padding: 0.6rem 1.4rem;
      background-color: var(--primary);
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-top: 1rem;
    }

    .btn:hover {
      background-color: var(--highlight);
    }

    .btn-small {
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 0.8rem;
      margin-right: 0.5rem;
    }

    .btn-edit { background: var(--success); }
    .btn-delete { background: var(--danger); }

    .input, select {
      width: 100%;
      padding: 0.8rem;
      border-radius: 12px;
      border: 1.5px solid var(--secondary);
      margin-bottom: 1rem;
      font-size: 1rem;
    }

    .input:focus, select:focus {
      outline: none;
      border-color: var(--primary);
    }

    footer {
      margin-top: 4rem;
      text-align: center;
      font-size: 0.9rem;
      color: var(--secondary);
    }
  </style>
</head>
<body>
  <header>
    <h1>Miruku 醫學筆記</h1>
    <p>🌸 記錄妳的每一份努力與成長 ✨</p>
    <button class="btn" onclick="toggleDarkMode()">🌓 切換日夜模式</button>
  </header>

  <section>
    <input type="text" id="noteTitle" class="input" placeholder="輸入筆記標題">
    <textarea id="noteContent" class="input" placeholder="輸入筆記內容..." rows="4"></textarea>
    <select id="noteCategory">
      <option value="解剖學">解剖學</option>
      <option value="生理學">生理學</option>
      <option value="藥理學">藥理學</option>
      <option value="臨床醫學">臨床醫學</option>
      <option value="其他">其他</option>
    </select>
    <button class="btn" onclick="saveNote()">📒 儲存筆記</button>
  </section>

  <section id="notesContainer"></section>

  <footer>
    © 2025 Miruku Notes | 用愛與熱情記錄每一頁知識 📖💗
  </footer>

  <script>
    let notes = JSON.parse(localStorage.getItem("miruku_notes")) || [];
    let editId = null;

    function saveNote() {
      const title = document.getElementById("noteTitle").value.trim();
      const content = document.getElementById("noteContent").value.trim();
      const category = document.getElementById("noteCategory").value;
      if (!title || !content) return;

      if (editId) {
        const idx = notes.findIndex(n => n.id === editId);
        notes[idx] = { ...notes[idx], title, content, category, date: new Date().toISOString() };
        editId = null;
      } else {
        notes.unshift({
          id: Date.now(),
          title,
          content,
          category,
          date: new Date().toISOString()
        });
      }

      localStorage.setItem("miruku_notes", JSON.stringify(notes));
      document.getElementById("noteTitle").value = "";
      document.getElementById("noteContent").value = "";
      renderNotes();
    }

    function deleteNote(id) {
      if (confirm("確定刪除？")) {
        notes = notes.filter(n => n.id !== id);
        localStorage.setItem("miruku_notes", JSON.stringify(notes));
        renderNotes();
      }
    }

    function editNote(id) {
      const note = notes.find(n => n.id === id);
      if (!note) return;
      document.getElementById("noteTitle").value = note.title;
      document.getElementById("noteContent").value = note.content;
      document.getElementById("noteCategory").value = note.category;
      editId = id;
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }

    function renderNotes() {
      const container = document.getElementById("notesContainer");
      container.innerHTML = notes.map(note => `
        <div class="note-card">
          <div class="note-title">${note.title}</div>
          <div class="note-content">${note.content}</div>
          <div class="note-date">📅 ${new Date(note.date).toLocaleDateString('zh-TW')}｜📂 ${note.category}</div>
          <div style="margin-top: 1rem;">
            <button class="btn btn-small btn-edit" onclick="editNote(${note.id})">✏️ 編輯</button>
            <button class="btn btn-small btn-delete" onclick="deleteNote(${note.id})">🗑️ 刪除</button>
          </div>
        </div>
      `).join("");
    }

    renderNotes();
  </script>
</body>
</html>
